[gd_scene load_steps=13 format=3 uid="uid://curknihdfnhn5"]

[ext_resource type="Texture2D" uid="uid://d11s64mkgkavw" path="res://assets/graphics/background/PRO_workroom.png" id="1_2atqe"]
[ext_resource type="Script" path="res://scene/levels/intro/detective_workshop.gd" id="1_qgogg"]
[ext_resource type="Texture2D" uid="uid://b0a4bakr1xbox" path="res://assets/graphics/bg_items/PRO_workroom_item_key_back.png" id="2_vpmgt"]
[ext_resource type="Texture2D" uid="uid://cwmup8nw7fyhs" path="res://assets/graphics/bg_items/PRO_workroom_item_key.png" id="3_a8you"]
[ext_resource type="Texture2D" uid="uid://ct0ypvd0qvdnf" path="res://assets/graphics/background/PRO_worktable.png" id="5_hys4o"]
[ext_resource type="Texture2D" uid="uid://ddyk3matl5jpf" path="res://assets/graphics/bg_items/PRO_worktable_item_key_back.png" id="6_854fu"]
[ext_resource type="Texture2D" uid="uid://bnnfwnda1kk4i" path="res://assets/graphics/bg_items/PRO_worktable_item_key.png" id="7_ggche"]

[sub_resource type="GDScript" id="GDScript_dlhvd"]
script/source = "extends TextureButton


# Called when the node enters the scene tree for the first time.
func _ready():
	if Inventory.check_item(\"Key\"):
		queue_free()


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass
"

[sub_resource type="Animation" id="Animation_l26jv"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:default_color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_sa7cs"]
resource_name = "glow"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:default_color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_f1l2m"]
_data = {
"RESET": SubResource("Animation_l26jv"),
"glow": SubResource("Animation_sa7cs")
}

[sub_resource type="GDScript" id="GDScript_q5o8c"]
script/source = "# Worktable Key

extends TextureButton


# Called when the node enters the scene tree for the first time.
func _ready():
	if Inventory.check_item(\"Key\"):
		queue_free()


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass
"

[node name="DetectiveWorkshop" type="Node"]
script = ExtResource("1_qgogg")

[node name="Background" type="TextureRect" parent="."]
offset_right = 40.0
offset_bottom = 40.0
texture = ExtResource("1_2atqe")

[node name="TextureRect2" type="TextureRect" parent="."]
visible = false
offset_right = 40.0
offset_bottom = 40.0
texture = ExtResource("2_vpmgt")

[node name="Key" type="TextureButton" parent="."]
offset_left = 952.0
offset_top = 573.0
offset_right = 974.0
offset_bottom = 596.0
texture_normal = ExtResource("3_a8you")
script = SubResource("GDScript_dlhvd")

[node name="BedroomDoor" type="Area2D" parent="."]

[node name="Collision" type="CollisionPolygon2D" parent="BedroomDoor"]
position = Vector2(1528, 228)
polygon = PackedVector2Array(-74, -185, 419, -156, 333, 276, 268, 345, 186, 744, -163, 631)

[node name="Line2D" type="Line2D" parent="BedroomDoor"]
points = PackedVector2Array(1452, 44, 1952, 72, 1849, 515, 1798, 575, 1711, 979, 1366, 859, 1452, 44)
width = 5.0
default_color = Color(1, 1, 1, 0)

[node name="AnimationPlayer" type="AnimationPlayer" parent="BedroomDoor/Line2D"]
libraries = {
"": SubResource("AnimationLibrary_f1l2m")
}

[node name="KeyInteractable" type="Area2D" parent="."]

[node name="Interactable" type="CollisionPolygon2D" parent="KeyInteractable"]
polygon = PackedVector2Array(924, 528, 1024, 562, 1022, 691, 836, 621)

[node name="TableCloseup" type="Control" parent="."]
visible = false
layout_mode = 3
anchors_preset = 0
offset_right = 1920.0
offset_bottom = 1080.0

[node name="CloseupTexture" type="TextureRect" parent="TableCloseup"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
texture = ExtResource("5_hys4o")

[node name="CloseupTextureWithItem" type="TextureRect" parent="TableCloseup"]
visible = false
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
texture = ExtResource("6_854fu")

[node name="WorktableKey" type="TextureButton" parent="TableCloseup"]
layout_mode = 0
offset_left = 840.0
offset_top = 675.0
offset_right = 939.0
offset_bottom = 785.0
texture_normal = ExtResource("7_ggche")
script = SubResource("GDScript_q5o8c")

[node name="ReturnButton" type="Button" parent="TableCloseup"]
layout_mode = 0
offset_left = 87.0
offset_top = 943.0
offset_right = 200.0
offset_bottom = 996.0
theme_override_font_sizes/font_size = 48
text = "Return"

[connection signal="input_event" from="BedroomDoor" to="." method="_on_open_door_input_event"]
[connection signal="mouse_entered" from="BedroomDoor" to="." method="_on_open_door_mouse_entered"]
[connection signal="mouse_exited" from="BedroomDoor" to="." method="_on_open_door_mouse_exited"]
[connection signal="input_event" from="KeyInteractable" to="." method="_on_key_interactable_input_event"]
[connection signal="pressed" from="TableCloseup/WorktableKey" to="." method="_on_worktable_key_pressed"]
[connection signal="pressed" from="TableCloseup/ReturnButton" to="." method="_on_return_button_pressed"]
